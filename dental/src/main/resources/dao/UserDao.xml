<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ricky.dentalclinic.dental.dao.UserDao">
    <select id="getUser" resultType="com.ricky.dentalclinic.dental.mbg.model.TUser">
        SELECT
        *
        FROM
        t_user
        WHERE
        username = #{username}
    </select>
    <select id="listUser" resultMap="com.ricky.dentalclinic.dental.mbg.mapper.TUserMapper.BaseResultMap">
        SELECT *
        FROM
        t_user
        WHERE
        is_delete = 0
        <if test="queryParam.name != null and queryParam.name != ''">
            AND name LIKE concat("%",#{queryParam.name},"%")
        </if>
        <if test="queryParam.sex != null and queryParam.sex != ''">
            AND sex = #{queryParam.sex}
        </if>
        <if test="queryParam.type != null and queryParam.type != '' or queryParam.type == 0">
            AND type = #{queryParam.type}
        </if>
        <if test="queryParam.phoneNumber != null and queryParam.phoneNumber != ''">
            AND phone_number LIKE concat("%",#{queryParam.phoneNumber},"%")
        </if>
    </select>
</mapper>